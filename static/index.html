<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <meta name="HandheldFriendly" content="true" />
	<meta name="viewport" content="initial-scale=1.0,maximum-scale=1.0,user-scalable=no,width=device-width">
	<title>ssh.report</title>
    <link type='text/css' media='all' rel="stylesheet" href="style.css" />
    <script src="pegasus.min.js"></script>
    <script type="text/javascript">
        document.addEventListener("DOMContentLoaded", function(event) { 
            document.querySelector(".query").style.display = "block";
            document.querySelector("form").addEventListener("submit", function(event) {
                event.stopPropagation();
                event.preventDefault();

                document.querySelector(".result").style.display = "none";
                document.querySelector(".working").style.display = "block";
                /*fetchival('/check').post({
                    Host: document.querySelector("#host").value,
                })
                .then(function(json) {
                    console.log(json)
                })
                .catch(function(err) {
                    console.log(arguments)
                    document.querySelector(".result").style.display = "block";
                    document.querySelector(".result").innerHTML = "Error: " + err;
                })*/


                var request = pegasus("/check");
                request.then(
                    function(data, xhr) {
                        console.log(JSON.stringify(data));
                    },
                    function(data, xhr) {
                        console.error(data, xhr.status)
                    }
                );


            });
        });
    </script>
</head>
<body>
    <header>
        <h1>ssh.report</h1>
        <h2>Get some informaton about your ssh server</h2>
    </header>
    <main>
        <noscript>Unfortunally this app is only working with enabled JavaScript</noscript>
        <section class="query">
            <form>
                <input type="text" name="host" id="host" pattern="[a-zA-Z0-9\-]+\.[a-zA-Z]{2,}" placeholder="example.com">
                <input type="submit" name="action" value="OK"/>
            </form>
        </section>
        <section class="result">
        </section>
    </main>
    <footer>
        <p>&copy;2017 ssh.report <a href="https://github.com/Eun/ssh.report">GitHub</a></p>
    </footer>
    
</body>
</html>
